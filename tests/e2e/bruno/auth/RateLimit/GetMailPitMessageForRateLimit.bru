meta {
  name: GetMailPitMessageForRateLimit
  type: http
  seq: 2
}

get {
  url: http://{{mailhogHost}}:8025/api/v1/messages?limit=1
  body: none
  auth: inherit
}

params:query {
  limit: 1
}

script:post-response {
  const response = res.getBody();

  test("status code", function(){
      expect(res.getStatus()).to.equal(200);
  });

  bru.setEnvVar("rateLimitLastMessageID", response.messages[0].ID)
}

settings {
  encodeUrl: true
}
